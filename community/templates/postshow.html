{% extends 'list.html' %}
{% load static %}
{% block content %}
<html>
<head>
    <style>
        hr{
            background-color: orange;
            height:1px;
        
        }

        #cookResult {
            background-color: #F3F3F1;
            border-radius: 40px;
            width : 1000px
        }
        
    </style>
</head>
<body>
    <div id="cookResult" class="col-md-offset-1 col-md-8">
        <!-- <div class="container"> -->

            <h3>제목 : {{ post.title }}</h3>
            <br/>
            <p>글쓴이: <span id="user_name">{{ post.writer.nickname }}</span></p>
            <hr>
            <p>{{ post.content | safe }}</p>
            
            <p>태그 : {{ post.tag }}</p>
            <div class="bt">
                {% if post.writer == user %}
                <a href="{% url 'postupdate' post.id %}"><button type="button" class="btn btn-secondary">수정하기</button></a>
                <a href="{% url 'postdelete' post.id %}"><button type="button" class="btn btn-secondary" onclick="return confirm('정말 삭제하시겠습니까?')">삭제하기</button></a>
                   
                {% endif %}
            </div>
            <hr>
            <a href="{% url 'list' %}"><button type="button" class="btn btn-secondary float-right">뒤로가기</button></a>
            <br/>
         
            {% if user.is_authenticated %}
            {% if request.user != post.writer %}
            {% if scrap %}
                    <a href="{% url 'communityscrap' post.id %}">스크랩 취소</a>
                {% else %}
                    <a href="{% url 'communityscrap' post.id %}">스크랩</a>
            {% endif %}
            {% endif %}
            {% endif %}
                <br/><br/>
                {% if request.user != post.writer %}
                <a href="#" data-uri="{% url 'likes' post.id  %}" class="recommend btn btn-primary">추천</a>
                {% endif %}
                <p>{{ post.like.all.count }}명이 이 게시글을 좋아합니다.</p>
                {% block script %}
                <script type='text/javascript'>
                $(document).ready(function(){
                    $(".recommend").on('click', function() {
                        if(confirm("정말로 추천하시겠습니까?")) {
                            location.href = $(this).data('uri');
                        }
                    });
                });
                </script>
                {% endblock %}
        
                <p id="cmt"><a href="{% url 'commentcreate' post.id %}">댓글 작성하기</a></p>
                <form method='POST'>
                    {% csrf_token %}
                    {{form}}
                    <button type="submit" class="btn btn-secondary">댓글 등록</button>
                </form>
        
                
        <hr/>
            <h4>댓글 목록</h4>
            {% for comment in post.comment_set.all %}
                
                <img src="/media/{{comment.writer.profile}}" alt=""/> {{comment.writer.nickname}} : {{comment.content}}
                {% if comment.writer == user %}
                    <a id="something" href="{% url 'commentupdate' post.id comment.id %}">수정하기</a>
                    <a id="something" href="{% url 'commentdelete' post.id comment.id %}" onclick="return confirm('정말 삭제하시겠습니까?')">삭제하기</a>
                {% endif %}
                
                <br/>
                
            {% endfor %}
    </div>

    
</body>
</html>
{% endblock %}


    
    


</div>